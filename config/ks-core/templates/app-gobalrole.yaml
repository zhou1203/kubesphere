apiVersion: iam.kubesphere.io/v1beta1
kind: GlobalRole
metadata:
  name: app-authenticated
rules:
  - apiGroups:
      - application.kubesphere.io
    resources:
      - 'apps'
      - 'categories'
      - 'apps/versions'
    verbs:
      - get
      - list
  # Permissions required to create edge app
  - apiGroups:
      - resources.kubesphere.io
    resources:
      - 'deployments'
    verbs:
      - get
      - list
  - apiGroups:
      - ''
    resources:
      - 'secrets'
      - 'limitranges'
    verbs:
      - get
      - list
  # Permissions required to install the edge app release
  - apiGroups:
      - infra.kubesphere.io
    resources:
      - 'nodetrees'
    verbs:
      - get
      - list
 
---
apiVersion: iam.kubesphere.io/v1beta1
kind: GlobalRoleBinding
metadata:
  name: app-authenticated
roleRef:
  apiGroup: iam.kubesphere.io
  kind: GlobalRole
  name: app-authenticated
subjects:
  - apiGroup: iam.kubesphere.io
    kind: Group
    name: system:authenticated